snapshot thing

extracted from my nixos config

consult [options.nix](src/options.nix)
